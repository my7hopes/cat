<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>오늘의 냥냥 운세</title>
  <style>
    body {font-family: system-ui,apple-system,Segoe UI,Roboto,Helvetica,Arial; margin:0; display:flex; min-height:100vh; align-items:center; justify-content:center; background:#fffaf2;}
    .card {width:min(520px,92vw); background:#fff; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:28px;}
    h1 {margin:0 0 12px; font-size:24px}
    .fortune {font-size:20px; line-height:1.6; margin:16px 0 20px;}
    .hint {color:#777; font-size:13px}
    button {border:0; padding:12px 16px; border-radius:12px; cursor:pointer}
    .actions {display:flex; gap:8px; margin-top:8px}
  </style>
</head>
<body>
  <div class="card">
    <h1>🐱 오늘의 냥냥 운세</h1>
    <div id="fortune" class="fortune">로딩 중...</div>
    <div class="actions">
      <button id="reroll">다시 뽑기</button>
      <button id="share">공유하기</button>
    </div>
    <div class="hint">팁: 내일 다시 찍으면 새로운 운세가 나와요.</div>
  </div>

  <script>
    // 원하는 문구 자유롭게 편집 (이모지 추가 OK)
    const MESSAGES = {
      common: [
        "오늘은 고양이처럼 느긋하게—하지만 기회엔 쾌속 점프!",
        "작은 정리가 큰 집중을 부른다. 책상 한 번 쓱―",
        "따뜻한 물 한 잔이 생각보다 많은 걸 바꾼다.",
        "예상 못한 칭찬이 들어올지도? 먼저 인사해봐요.",
        "운이 문 앞에 왔어요. 손잡이를 먼저 돌리는 쪽이 당신!"
      ],
      // ?theme=love 처럼 붙이면 다른 풀에서 뽑히게 (옵션)
      love: [
        "고양이 발바닥처럼 말랑한 대화가 사랑을 부른다.",
        "오늘은 먼저 안부 묻는 사람이 행운!",
        "작은 선물보다 기억에 남는 한 문장이 더 큰 힘."
      ],
      work: [
        "회의에서 한 문장 요약을 맡아보자. 존재감 +1",
        "메일은 짧고 선명하게. 답장은 빠르게 돌아온다.",
        "한 번에 다 하려 하지 말 것: 25분 타이머 추천!"
      ]
    };

    // ‘하루 1운세’ 모드: 날짜 고정 랜덤 (새로고침해도 같은 결과)
    function seededRandom(seed) {
      // xorshift32
      let x = seed;
      x ^= x << 13; x ^= x >>> 17; x ^= x << 5;
      return (x >>> 0) / 4294967296;
    }

    function pickDailyMessage(pool) {
      const today = new Date();
      const seed = Number(`${today.getFullYear()}${today.getMonth()+1}${today.getDate()}`);
      const r = seededRandom(seed);
      return pool[Math.floor(r * pool.length)];
    }

    function getPool() {
      const params = new URLSearchParams(location.search);
      const theme = params.get("theme"); // 예: ?theme=work
      const base = [...MESSAGES.common];
      if (theme && MESSAGES[theme]) base.push(...MESSAGES[theme]);
      return base;
    }

    function showFortune(daily=true) {
      const pool = getPool();
      const msg = daily
        ? pickDailyMessage(pool)
        : pool[Math.floor(Math.random()*pool.length)];
      document.getElementById("fortune").textContent = msg;
    }

    // 초기: ‘하루 1운세’로 고정
    showFortune(true);

    // 다시 뽑기는 진짜 랜덤
    document.getElementById("reroll").onclick = () => showFortune(false);

    document.getElementById("share").onclick = async () => {
      const text = "🐱 오늘의 냥냥 운세\n" + document.getElementById("fortune").textContent;
      try {
        await navigator.share?.({ text }) || navigator.clipboard.writeText(text);
        alert("공유/복사 완료!");
      } catch { alert("복사 실패 ㅠㅠ 한번 더 시도해봐요."); }
    };
  </script>
</body>
</html>
